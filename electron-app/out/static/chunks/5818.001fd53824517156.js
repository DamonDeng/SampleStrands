(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5818],{95818:function(t,e,n){"use strict";n.r(e),n.d(e,{AgentAvatar:function(){return F},AgentConfig:function(){return L},AgentPage:function(){return O},ContextPrompts:function(){return K}});var a=n(9268),i=n(48),o=n(3686),c=n(37035),s=n.n(c),r=n(33186),l=n(19081),d=n(80199),h=n(46816),g=n(35520),_=n(49862),m=n(83573),p=n(46011),x=n(75202),u=n(85422),j=n.n(u),f=n(52050),C=n.n(f),v=n(38792),b=n(21568),A=n(41548),Z=n(19319),y=n(16778),P=n(1405),w=n(17005),N=n(54461),k=n.n(N),S=n(86006),I=n(9881),T=n(80990),E=n(72908),H=n(22223);function F(t){return t.avatar!==v.Mj?(0,a.jsx)(y.qE,{avatar:t.avatar}):(0,a.jsx)(y.qE,{model:t.model})}function L(t){let[e,n]=(0,S.useState)(!1),o=(0,b.MG)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{context:t.agent.context,updateContext:e=>{let n=t.agent.context.slice();e(n),t.updateAgent(t=>t.context=n)}}),(0,a.jsxs)(Z.aV,{children:[(0,a.jsx)(Z.HC,{title:P.ZP.Agent.Config.Avatar,children:(0,a.jsx)(Z.J2,{content:(0,a.jsx)(y.aR,{onEmojiClick:e=>{t.updateAgent(t=>t.avatar=e),n(!1)}}),open:e,onClose:()=>n(!1),children:(0,a.jsx)("div",{onClick:()=>n(!0),style:{cursor:"pointer"},children:(0,a.jsx)(F,{avatar:t.agent.avatar,model:t.agent.modelConfig.model})})})}),(0,a.jsx)(Z.HC,{title:P.ZP.Agent.Config.Name,children:(0,a.jsx)("input",{type:"text",value:t.agent.name,onInput:e=>t.updateAgent(t=>{t.name=e.currentTarget.value})})}),(0,a.jsx)(Z.HC,{title:P.ZP.Agent.Config.Description,children:(0,a.jsx)("input",{type:"text",value:t.agent.description||"",onInput:e=>t.updateAgent(t=>{t.description=e.currentTarget.value})})}),(0,a.jsx)(Z.HC,{title:P.ZP.Agent.Config.HideContext.Title,subTitle:P.ZP.Agent.Config.HideContext.SubTitle,children:(0,a.jsx)("input",{type:"checkbox",checked:t.agent.hideContext,onChange:e=>{t.updateAgent(t=>{t.hideContext=e.currentTarget.checked})}})}),t.shouldSyncFromGlobal?null:(0,a.jsx)(Z.HC,{title:P.ZP.Agent.Config.Share.Title,subTitle:P.ZP.Agent.Config.Share.SubTitle,children:(0,a.jsx)(i.h,{icon:(0,a.jsx)(p.Z,{}),text:P.ZP.Agent.Config.Share.Action,onClick:()=>{let e="".concat(location.protocol,"//").concat(location.host,"/#").concat(E.y$.NewChat,"?agent=").concat(t.agent.id);(0,I.vQ)(e)}})}),t.shouldSyncFromGlobal?(0,a.jsx)(Z.HC,{title:P.ZP.Agent.Config.Sync.Title,subTitle:P.ZP.Agent.Config.Sync.SubTitle,children:(0,a.jsx)("input",{type:"checkbox",checked:t.agent.syncGlobalConfig,onChange:async e=>{let n=e.currentTarget.checked;n&&await (0,Z.i0)(P.ZP.Agent.Config.Sync.Confirm)?t.updateAgent(t=>{t.syncGlobalConfig=n,t.modelConfig={...o.modelConfig}}):n||t.updateAgent(t=>{t.syncGlobalConfig=n})}})}):null]}),(0,a.jsxs)(Z.aV,{children:[(0,a.jsx)(T.j,{modelConfig:{...t.agent.modelConfig},updateConfig:e=>{if(t.readonly)return;let n={...t.agent.modelConfig};e(n),t.updateAgent(t=>{t.modelConfig=n,t.syncGlobalConfig=!1})}}),t.extraListItems]})]})}function D(t){let[e,n]=(0,S.useState)(!1);return(0,a.jsxs)("div",{className:k()["context-prompt-row"],children:[!e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:k()["context-drag"],children:(0,a.jsx)(x.Z,{})}),(0,a.jsx)(Z.Ph,{value:t.prompt.role,className:k()["context-role"],onChange:e=>t.update({...t.prompt,role:e.target.value}),children:A.K$.map(t=>(0,a.jsx)("option",{value:t,children:t},t))})]}),(0,a.jsx)(Z.II,{value:(0,I.YK)(t.prompt),type:"text",className:k()["context-content"],rows:e?5:1,onFocus:()=>n(!0),onBlur:()=>{var t,e;n(!1),null===(e=window)||void 0===e||null===(t=e.getSelection())||void 0===t||t.removeAllRanges()},onInput:e=>t.update({...t.prompt,content:e.currentTarget.value})}),!e&&(0,a.jsx)(i.h,{icon:(0,a.jsx)(_.Z,{}),className:k()["context-delete-button"],onClick:()=>t.remove(),bordered:!0})]})}function K(t){let e=t.context,n=(e,n)=>{t.updateContext(t=>t.splice(n,0,e))},o=e=>{t.updateContext(t=>t.splice(e,1))},c=(e,n)=>{t.updateContext(t=>{let a=(0,I.Bs)(t[e]);if(t[e]=n,a.length>0){let n=(0,I.YK)(t[e]),i=[{type:"text",text:n}];for(let t of a)i.push({type:"image_url",image_url:{url:t}});t[e].content=i}})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:k()["context-prompt"],style:{marginBottom:20},children:[(0,a.jsx)(H.Z5,{onDragEnd:n=>{if(!n.destination)return;let a=function(t,e,n){let a=[...t],[i]=a.splice(e,1);return a.splice(n,0,i),a}(e,n.source.index,n.destination.index);t.updateContext(t=>{t.splice(0,t.length,...a)})},children:(0,a.jsx)(H.bK,{droppableId:"context-prompt-list",children:t=>(0,a.jsxs)("div",{ref:t.innerRef,...t.droppableProps,children:[e.map((t,e)=>(0,a.jsx)(H._l,{draggableId:t.id||e.toString(),index:e,children:i=>(0,a.jsxs)("div",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,children:[(0,a.jsx)(D,{index:e,prompt:t,update:t=>c(e,t),remove:()=>o(e)}),(0,a.jsx)("div",{className:k()["context-prompt-insert"],onClick:()=>{n((0,b.tn)({role:"user",content:"",date:new Date().toLocaleString()}),e+1)},children:(0,a.jsx)(h.Z,{})})]})},t.id)),t.placeholder]})})}),0===t.context.length&&(0,a.jsx)("div",{className:k()["context-prompt-row"],children:(0,a.jsx)(i.h,{icon:(0,a.jsx)(h.Z,{}),text:P.ZP.Context.Add,bordered:!0,className:k()["context-prompt-button"],onClick:()=>n((0,b.tn)({role:"user",content:"",date:""}),t.context.length)})})]})})}function O(){var t;let e=(0,w.s0)(),n=(0,v.EW)(),c=(0,b.aK)(),[x,u]=(0,S.useState)(),f=n.getAll().filter(t=>!x||t.lang===x),[A,y]=(0,S.useState)([]),[N,k]=(0,S.useState)(""),T=N.length>0?A:f,H=t=>{if(k(t),t.length>0){let e=f.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));y(e)}else y(f)},[D,K]=(0,S.useState)(),O=D?null!==(t=n.get(D))&&void 0!==t?t:f.find(t=>t.id===D):void 0,U=()=>{(0,I.j2)().then(t=>{try{let e=JSON.parse(t);if(Array.isArray(e)){for(let t of e)t.name&&n.create(t);return}e.name&&n.create(e)}catch(t){}})},G=()=>{var t;(t={},new Promise((e,n)=>{let a=C().parse("https://i8mf90he81.execute-api.us-east-1.amazonaws.com"),i={hostname:a.hostname,port:a.port?parseInt(a.port):443,path:a.path,method:"GET",headers:t},o=j().request(i,t=>{let n="";t.on("data",t=>{n+=t}),t.on("end",()=>{e(n)})});o.on("error",t=>{n(t)}),o.end()})).then(t=>{console.log(t);try{let e=JSON.parse(t);if(Array.isArray(e)){for(let t of e)t.name&&n.create(t);return}e.name&&n.create(e),console.log("import successful")}catch(t){console.error(t)}}).catch(t=>{console.error(t)})};return(0,a.jsxs)(o.S,{children:[(0,a.jsxs)("div",{className:s()["agent-page"],children:[(0,a.jsxs)("div",{className:"window-header",children:[(0,a.jsxs)("div",{className:"window-header-title",children:[(0,a.jsx)("div",{className:"window-header-main-title",children:P.ZP.Agent.Page.Title}),(0,a.jsx)("div",{className:"window-header-submai-title",children:P.ZP.Agent.Page.SubTitle(f.length)})]}),(0,a.jsxs)("div",{className:"window-actions",children:[(0,a.jsx)("div",{className:"window-action-button",children:(0,a.jsx)(i.h,{icon:(0,a.jsx)(r.Z,{}),bordered:!0,onClick:()=>{(0,I.CP)(JSON.stringify(T.filter(t=>!t.builtin)),E.dJ.Agents)},text:P.ZP.UI.Export})}),(0,a.jsx)("div",{className:"window-action-button",children:(0,a.jsx)(i.h,{icon:(0,a.jsx)(l.Z,{}),text:P.ZP.UI.Import,bordered:!0,onClick:()=>U()})}),(0,a.jsx)("div",{className:"window-action-button",children:(0,a.jsx)(i.h,{icon:(0,a.jsx)(l.Z,{}),text:P.ZP.UI.ImportFromHub,bordered:!0,onClick:()=>G()})}),(0,a.jsx)("div",{className:"window-action-button",children:(0,a.jsx)(i.h,{icon:(0,a.jsx)(g.Z,{}),bordered:!0,onClick:()=>e(-1)})})]})]}),(0,a.jsxs)("div",{className:s()["agent-page-body"],children:[(0,a.jsxs)("div",{className:s()["agent-filter"],children:[(0,a.jsx)("input",{type:"text",className:s()["search-bar"],placeholder:P.ZP.Agent.Page.Search,autoFocus:!0,onInput:t=>H(t.currentTarget.value)}),(0,a.jsxs)(Z.Ph,{className:s()["agent-filter-lang"],value:null!=x?x:P.ZP.Settings.Lang.All,onChange:t=>{let e=t.currentTarget.value;e===P.ZP.Settings.Lang.All?u(void 0):u(e)},children:[(0,a.jsx)("option",{value:P.ZP.Settings.Lang.All,children:P.ZP.Settings.Lang.All},"all"),P.DC.map(t=>(0,a.jsx)("option",{value:t,children:P.nW[t]},t))]}),(0,a.jsx)(i.h,{className:s()["agent-create"],icon:(0,a.jsx)(h.Z,{}),text:P.ZP.Agent.Page.Create,bordered:!0,onClick:()=>{let t=n.create();K(t.id)}})]}),(0,a.jsx)("div",{children:T.map(t=>(0,a.jsxs)("div",{className:s()["agent-item"],children:[(0,a.jsxs)("div",{className:s()["agent-header"],children:[(0,a.jsx)("div",{className:s()["agent-icon"],children:(0,a.jsx)(F,{avatar:t.avatar,model:t.modelConfig.model})}),(0,a.jsxs)("div",{className:s()["agent-title"],children:[(0,a.jsx)("div",{className:s()["agent-name"],children:t.name}),(0,a.jsx)("div",{className:s()["agent-info"]+" one-line",children:"".concat(P.ZP.Agent.Item.Info(t.context.length)," / ").concat(P.nW[t.lang]," / ").concat(t.modelConfig.model)})]})]}),(0,a.jsxs)("div",{className:s()["agent-actions"],children:[(0,a.jsx)(i.h,{icon:(0,a.jsx)(h.Z,{}),text:P.ZP.Agent.Item.Chat,onClick:()=>{c.newSession(t),e(E.y$.Chat)}}),t.builtin?(0,a.jsx)(i.h,{icon:(0,a.jsx)(m.Z,{}),text:P.ZP.Agent.Item.View,onClick:()=>K(t.id)}):(0,a.jsx)(i.h,{icon:(0,a.jsx)(d.Z,{}),text:P.ZP.Agent.Item.Edit,onClick:()=>K(t.id)}),!t.builtin&&(0,a.jsx)(i.h,{icon:(0,a.jsx)(_.Z,{}),text:P.ZP.Agent.Item.Delete,onClick:async()=>{await (0,Z.i0)(P.ZP.Agent.Item.DeleteConfirm)&&n.delete(t.id)}})]})]},t.id))})]})]}),O&&(0,a.jsx)("div",{className:"modal-mask",children:(0,a.jsx)(Z.u_,{title:P.ZP.Agent.EditModal.Title(null==O?void 0:O.builtin),onClose:()=>K(void 0),actions:[(0,a.jsx)(i.h,{icon:(0,a.jsx)(r.Z,{}),text:P.ZP.Agent.EditModal.Download,bordered:!0,onClick:()=>(0,I.CP)(JSON.stringify(O),"".concat(O.name,".json"))},"export"),(0,a.jsx)(i.h,{icon:(0,a.jsx)(p.Z,{}),bordered:!0,text:P.ZP.Agent.EditModal.Clone,onClick:()=>{e(E.y$.Agents),n.create(O),K(void 0)}},"copy")],children:(0,a.jsx)(L,{agent:O,updateAgent:t=>n.updateAgent(D,t),readonly:O.builtin})})})]})}},37035:function(t){t.exports={"agent-page":"agent_agent-page__xPrLy","agent-page-body":"agent_agent-page-body__OnHe7","agent-filter":"agent_agent-filter__y_mou","slide-in":"agent_slide-in__5Z5Sl","search-bar":"agent_search-bar__ilqmi","agent-filter-lang":"agent_agent-filter-lang__NRAxJ","agent-create":"agent_agent-create__B0wtw","agent-item":"agent_agent-item__oynhR","agent-header":"agent_agent-header__jmVwn","agent-icon":"agent_agent-icon__xUYDF","agent-title":"agent_agent-title__TVDbi","agent-name":"agent_agent-name__buTKz","agent-info":"agent_agent-info__HL5Zs","agent-actions":"agent_agent-actions__kc64P","slide-in-from-top":"agent_slide-in-from-top__wWFUV"}},54461:function(t){t.exports={"attach-images":"chat_attach-images__UtJds","attach-image":"chat_attach-image__5zxeG","attach-image-mask":"chat_attach-image-mask__cOlWM","delete-image":"chat_delete-image__IBtAc","chat-input-actions":"chat_chat-input-actions__mwYC_","chat-input-action":"chat_chat-input-action__DMW7Y","slide-in":"chat_slide-in__nvZgA",text:"chat_text__TkPfN",icon:"chat_icon__Ly3TN","prompt-toast":"chat_prompt-toast___VCUf","prompt-toast-inner":"chat_prompt-toast-inner__f17E6","slide-in-from-top":"chat_slide-in-from-top__Q0KCt","prompt-toast-content":"chat_prompt-toast-content__9sp_w","section-title":"chat_section-title__BiPko","section-title-action":"chat_section-title-action__bmruw","context-prompt":"chat_context-prompt__cbach","context-prompt-insert":"chat_context-prompt-insert__UmNJi","context-prompt-row":"chat_context-prompt-row__3Kbix","context-drag":"chat_context-drag__BX7lh","context-role":"chat_context-role__7_IR9","context-content":"chat_context-content__sNXUy","context-delete-button":"chat_context-delete-button__C_BmS","context-prompt-button":"chat_context-prompt-button__AoPsw","memory-prompt":"chat_memory-prompt__vOzcn","memory-prompt-content":"chat_memory-prompt-content__kUVKj","clear-context":"chat_clear-context__ke8Iw","clear-context-tips":"chat_clear-context-tips__L1A_i","clear-context-revert-btn":"chat_clear-context-revert-btn___Wna1",chat:"chat_chat__ZebHg","chat-body":"chat_chat-body__QFv5x","chat-body-main-title":"chat_chat-body-main-title__jUL6h","chat-body-title":"chat_chat-body-title__d2ItC","chat-message":"chat_chat-message__dg8rL","chat-message-user":"chat_chat-message-user__ZtTEj","chat-message-header":"chat_chat-message-header__Dny_K","chat-message-actions":"chat_chat-message-actions__H90hg","chat-message-container":"chat_chat-message-container__O_X8_","chat-message-edit":"chat_chat-message-edit__h58of","chat-message-avatar":"chat_chat-message-avatar__3QeMq","chat-message-status":"chat_chat-message-status__zc9Ad","chat-message-item":"chat_chat-message-item__dKqMl","chat-message-item-image":"chat_chat-message-item-image__2jbb0","chat-message-item-images":"chat_chat-message-item-images__EtEM4","chat-message-item-image-multi":"chat_chat-message-item-image-multi__DOIxY","chat-message-action-date":"chat_chat-message-action-date__RsXTn","chat-message-action-metrics":"chat_chat-message-action-metrics__YPzFn","chat-input-panel":"chat_chat-input-panel__rO72m","prompt-hints":"chat_prompt-hints__VT_Oi","prompt-hint":"chat_prompt-hint__2616t","hint-title":"chat_hint-title__E53ZK","hint-content":"chat_hint-content__y2yj4","prompt-hint-selected":"chat_prompt-hint-selected__o3vYi","chat-input-panel-inner":"chat_chat-input-panel-inner___IQHi","chat-input-panel-inner-attach":"chat_chat-input-panel-inner-attach__mZheu","chat-input":"chat_chat-input__PQ_oF","chat-input-send":"chat_chat-input-send__GFQZo"}}}]);