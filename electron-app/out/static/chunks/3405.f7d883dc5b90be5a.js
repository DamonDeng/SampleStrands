"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3405],{93405:function(e,t,s){var i,r,n,a;function h(e,t,s,i){if("a"===s&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)}function o(e,t,s,i,r){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!r)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,s):r?r.value=s:t.set(e,s),s}s.d(t,{Command:function(){return p}}),"function"==typeof SuppressedError&&SuppressedError;let l="__TAURI_TO_IPC_KEY__";class c{constructor(e){i.set(this,void 0),r.set(this,0),n.set(this,[]),a.set(this,void 0),o(this,i,e||(()=>{}),"f"),this.id=function(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}(e=>{let t=e.index;if("end"in e){t==h(this,r,"f")?this.cleanupCallback():o(this,a,t,"f");return}let s=e.message;if(t==h(this,r,"f")){for(h(this,i,"f").call(this,s),o(this,r,h(this,r,"f")+1,"f");(h(this,r,"f") in h(this,n,"f"));){let e=h(this,n,"f")[h(this,r,"f")];h(this,i,"f").call(this,e),delete h(this,n,"f")[h(this,r,"f")],o(this,r,h(this,r,"f")+1,"f")}h(this,r,"f")===h(this,a,"f")&&this.cleanupCallback()}else h(this,n,"f")[t]=s})}cleanupCallback(){Reflect.deleteProperty(window,`_${this.id}`)}set onmessage(e){o(this,i,e,"f")}get onmessage(){return h(this,i,"f")}[(i=new WeakMap,r=new WeakMap,n=new WeakMap,a=new WeakMap,l)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[l]()}}async function u(e,t={},s){return window.__TAURI_INTERNALS__.invoke(e,t,s)}new WeakMap;class f{constructor(){this.eventListeners=Object.create(null)}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}on(e,t){return e in this.eventListeners?this.eventListeners[e].push(t):this.eventListeners[e]=[t],this}once(e,t){let s=i=>{this.removeListener(e,s),t(i)};return this.addListener(e,s)}off(e,t){return e in this.eventListeners&&(this.eventListeners[e]=this.eventListeners[e].filter(e=>e!==t)),this}removeAllListeners(e){return e?delete this.eventListeners[e]:this.eventListeners=Object.create(null),this}emit(e,t){if(e in this.eventListeners){let s=this.eventListeners[e];for(let e of s)e(t);return!0}return!1}listenerCount(e){return e in this.eventListeners?this.eventListeners[e].length:0}prependListener(e,t){return e in this.eventListeners?this.eventListeners[e].unshift(t):this.eventListeners[e]=[t],this}prependOnceListener(e,t){let s=i=>{this.removeListener(e,s),t(i)};return this.prependListener(e,s)}}class d{constructor(e){this.pid=e}async write(e){await u("plugin:shell|stdin_write",{pid:this.pid,buffer:e})}async kill(){await u("plugin:shell|kill",{cmd:"killChild",pid:this.pid})}}class p extends f{constructor(e,t=[],s){super(),this.stdout=new f,this.stderr=new f,this.program=e,this.args="string"==typeof t?[t]:t,this.options=s??{}}static create(e,t=[],s){return new p(e,t,s)}static sidecar(e,t=[],s){let i=new p(e,t,s);return i.options.sidecar=!0,i}async spawn(){let e=this.program,t=this.args,s=this.options;"object"==typeof t&&Object.freeze(t);let i=new c;return i.onmessage=e=>{switch(e.event){case"Error":this.emit("error",e.payload);break;case"Terminated":this.emit("close",e.payload);break;case"Stdout":this.stdout.emit("data",e.payload);break;case"Stderr":this.stderr.emit("data",e.payload)}},await u("plugin:shell|spawn",{program:e,args:t,options:s,onEvent:i}).then(e=>new d(e))}async execute(){let e=this.program,t=this.args,s=this.options;return"object"==typeof t&&Object.freeze(t),await u("plugin:shell|execute",{program:e,args:t,options:s})}}}}]);